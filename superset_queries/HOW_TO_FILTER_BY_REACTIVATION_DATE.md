# Как фильтровать по дате реактивации

В запросе есть колонка `first_deposit` - это **дата реактивации** (когда пользователь сделал депозит после периода неактивности).

## Важно понимать:

- **`first_deposit`** = дата реактивации (конкретная дата, когда пользователь вернулся)
- **`inactivity_period`** = период неактивности (категория: 7-14 days, 14-30 days, и т.д.)

## Настройка фильтра по дате реактивации:

### Шаг 1: Создайте Dataset

1. Выполните SQL-запрос в SQL Lab
2. Нажмите **"Save"** → **"Save as dataset"**
3. Назовите Dataset: **"Реактивации"**
4. Убедитесь, что колонка `first_deposit` имеет тип **Date/Time** или **Temporal**
5. Сохраните Dataset

### Шаг 2: Создайте Chart

1. Создайте Chart на основе Dataset **"Реактивации"**
2. Настройте:
   - **Query mode**: `Aggregate`
   - **Group by**: `inactivity_period`
   - **Metrics**: `COUNT(user_id)` (количество реактиваций)
3. Сохраните Chart

### Шаг 3: Добавьте фильтр по дате реактивации на Dashboard

1. На Dashboard нажмите **"Edit dashboard"**
2. Нажмите **"+ ADD FILTER"**
3. Выберите **"Date Range Filter"**
4. Настройте:
   - **Filter name**: "Период реактивации"
   - **Dataset**: **"Реактивации"**
   - **Time column**: `first_deposit` ← **ВАЖНО: это дата реактивации!**
   - **Default value**: Выберите нужный период (например, "Last 30 days" или "Custom...")
5. Нажмите **"SAVE"**

### Шаг 4: Настройте Scoping

1. Нажмите на созданный фильтр в режиме редактирования
2. В разделе **"Scoping"** выберите ваш Chart
3. Убедитесь, что фильтр применяется к Chart
4. Сохраните Dashboard

## Пример использования:

**Задача:** Посмотреть реактивации за 23-25 августа 2025

1. Откройте Dashboard
2. В фильтре "Период реактивации" выберите:
   - **Custom range**
   - **Start date**: 2025-08-23
   - **End date**: 2025-08-25
3. Chart автоматически обновится и покажет:
   - Количество реактиваций за 23-25 августа
   - Разбивку по периодам неактивности (7-14 days, 14-30 days, и т.д.)

## Что вы увидите:

После применения фильтра Chart покажет:
- **7-14 days**: X реактиваций за выбранный период
- **14-30 days**: Y реактиваций за выбранный период
- **30-90 days**: Z реактиваций за выбранный период
- **90+ days**: W реактиваций за выбранный период

Все данные будут отфильтрованы по дате реактивации (`first_deposit`), которую вы выбрали в фильтре.

